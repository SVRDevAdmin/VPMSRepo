@model VPMS.Lib.Data.Models.Pets;
@inject IHttpContextAccessor httpContextaccessor
@using Microsoft.AspNetCore.Localization
@inject VPMSWeb.Interface.IResourcesLocalizer LangResources

@{
	ViewData["Title"] = "Patients Page";
	ViewBag.SelectedMenu = "patientsMenu";
	ViewBag.Breed = Model.Breed;
	List<string> otherPets = ViewData["OtherPets"] as List<string>;

	var theme = httpContextaccessor.HttpContext.Request.Cookies["theme"];

	if (theme != null)
	{
		if (theme == "dark")
		{
			ViewBag.DarkTheme = "Dark";
		}
		if (theme == "light")
		{
			ViewBag.DarkTheme = "Light";
		}
	}
	else
	{
		ViewBag.DarkTheme = "Light";
	}
}

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js" integrity="sha512-YcsIPGdhPK4P/uRW6/sruonlYj+Q7UHWeKfTAkBW+g83NKM+jMJFJ4iAPfSnVp7BKD4dKMHmVSvICUbE/V1sSw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<style>
	.field-container {
		display: flex;
		flex-direction: column;
		margin-left: 1.5vw;
		margin-right: 1.5vw;
	}

	.formlabel {
		font-weight: bold;
		margin-bottom: 0.3vw;
		font-size: 1vw;
	}

	.inputField {
		border: 0.1vw solid;
		font-size: 1vw;
	}

	.halfSize {
		width: 36vw;
	}

	.quaterSize {
		width: 16.5vw;
	}

	/* circle-icon */
	#container {
		width: 1.6vw;
		height: 1.6vw;
		display: flex;
		background: transparent;
		border-radius: 2vw;
		color: blue;
		border: 0.15vw solid;
		font-size: 1.5vw;
		justify-content: center;
		align-items: center;
	}

	.currentPage {
		background-color: blue !important;
		color: white !important;
		border: none;
		border-style: none !important;
	}

	.currentPageText {
		color: black !important;
	}

	.medicalRecordPartition {
		width: 26vw;
		height: 27vw;
		overflow: auto;
	}

	.medicalRecordPartitionTitle {
		margin-left: 1.5vw;
		margin-right: 1.5vw;
		margin-bottom: 1.5vw;
	}

	/* for tooltips */
	/* Tooltip container */
	.tooltip {
		position: relative;
		display: inline-block;
		opacity: 1;
	}

		/* Tooltip text */
		.tooltip .tooltiptext {
			visibility: hidden;
			/* width: 120px; */
			background-color: black;
			color: #fff;
			text-align: center;
			padding: 5px 0;
			border-radius: 6px;
			font-size: 0.7vw;
			/* Position the tooltip text - see examples below! */
			position: absolute;
			z-index: 1;
			width: 12vw;
			bottom: 100%;
			left: 50%;
			margin-left: -1.8vw;
			/* Fade in tooltip - takes 1 second to go from 0% to 100% opac: */
			opacity: 0;
			transition: opacity 1s;
		}

		/* Show the tooltip text when you mouse over the tooltip container */
		.tooltip:hover .tooltiptext {
			opacity: 1;
			visibility: visible;
		}

		/* Hover dropdown */
	.dropbtn {
		background-color: transparent;
		/* color: white; */
		/* padding: 16px; */
		font-size: 1.3vw;
		border: none;
	}

	.dropdown {
		position: relative;
		display: inline-block;
	}

	.dropdown-content {
		display: none;
		position: absolute;
		background-color: #f1f1f1;
		min-width: 9vw;
		box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
		z-index: 1;
		right: 0;
		text-align: center;
	}

		.dropdown-content a {
			color: black;
			padding: 0 1vw;
			text-decoration: none;
			display: block;
		}

			/* .dropdown-content a:hover {
				background-color: #ddd;
			} */

	.dropdown:hover .dropdown-content {
		display: block;
	}

	td, th {
		padding: 0 1vw;
	}

	.dropdown:hover .dropdown-arrow {
		transform: rotate(180deg);
	}	

	.dropdown-arrow {		
		transition: 0.6s ease;
	}
</style>

<div style="display: flex;">

	<div style="display: flex; align-items: center; margin-bottom: 1.5vw;">
		<img id="imgBackArrow" style=" margin-right: 1vw; width: 1.5vw;" onclick="location.href='/Patients/PatientProfile/view/@ViewBag.PatientID'" />
		<span class="textColor" style="font-size: 2vw;">@LangResources["Patient_Title_Patients"]</span>
		<span class="textColor" style="font-size: 2vw; margin-left:1vw; margin-right:1vw; font-weight: bold;"> &#62; </span>
		<span class="textColor" style="font-size: 2vw;">@LangResources["Patient_Title_PatientProfile"]</span>
		<span class="textColor" style="font-size: 2vw; margin-left:1vw; margin-right:1vw; font-weight: bold;"> &#62; </span>
		<span style="font-size: 2vw; color: dodgerblue;">@ViewData["PetName"] @LangResources["Patient_Title_Profile"]</span>
	</div>
</div>

<div style="display: flex; justify-content: center;">
	<div id="LeftInfoContainer" style="overflow: auto; height: 74vh; margin-right: 1vw; width: 51vw;">
		
		<div class="containerBackground2" style="width: 50vw; color: white; padding: 0.7vw; padding-left: 1.5vw; border-top-left-radius: 0.5vw; border-top-right-radius: 0.5vw;  display: flex; justify-content: space-between; align-items: center;">
			<span class="formlabel" style="margin-bottom: 0 !important;">@LangResources["Patient_Title_PetInfo"]</span>
			<button onclick="editPetInfo(false);" class="btn btn-lg btn-primary petInfoProfile" style="height: 2vw; width: 3vw; padding: 0; display: flex; justify-content: center; align-items: center;">
				<i class="fa-regular fa-pen-to-square"></i>
			</button>
		</div>
		<div class="containerBorder" style="color: darkgray; width: 50vw; border-style: solid; border-bottom-left-radius: 0.5vw; border-bottom-right-radius: 0.5vw; padding: 1.5vw; padding-left: 0.5vw; padding-right: 0.5vw; padding-bottom: 0.5vw; margin-bottom: 2vw;">
			 
			<input id="PetID" type="text" value="@Model.ID" hidden />
			<input id="PetCreatedDate" type="text" value="@Model.CreatedDate.ToString("yyyy-MM-ddTHH:mm:ss")" hidden />
			<input id="PetCreatedBy" type="text" value="@Model.CreatedBy" hidden />

			<div style="display: flex; margin-bottom: 1.5vw;">
				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_PetName"]</span>
					<input type="text" class="form-control form-field inputField petInfoProfile PetName hideContainer" value="@Model.Name" />
					<span class="formlabel petInfoProfile textColor PetName">@Model.Name</span>
				</div>

				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_RegistrationNo"]</span>
					<input type="text" class="form-control form-field inputField petInfoProfile RegistrationNo hideContainer" value="@Model.RegistrationNo" />
					<span class="formlabel petInfoProfile textColor RegistrationNo">@Model.RegistrationNo</span>
				</div>

				<div class="field-container">
					<span class="formlabel">@LangResources["Patient_Label_Sex"]</span>
					<select class="form-control form-field inputField petInfoProfile Sex hideContainer">
						<option value=""> -- @LangResources["Patient_Selection_SelectSex"] --</option>
						@if (Model.Gender == "M")
						{
							<option value="M" selected> @LangResources["Patient_Selection_Male"]</option>
							<option value="F"> @LangResources["Patient_Selection_Female"]</option>
							Model.Gender = @LangResources["Patient_Selection_Male"];
						}
						else
						{
							<option value="M"> @LangResources["Patient_Selection_Male"]</option>
							<option value="F" selected> @LangResources["Patient_Selection_Female"]</option>
							Model.Gender = @LangResources["Patient_Selection_Female"];
						}
					</select>
					<span class="formlabel petInfoProfile textColor Sex">@Model.Gender</span>
				</div>
			</div>

			<div style="display: flex; margin-bottom: 1.5vw;">
				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_DOB"]</span>
					<input type="date" class="form-control form-field inputField petInfoProfile DOB hideContainer" value="@Model.DOB.ToString("yyyy-MM-dd")" onchange="updateAge(this);"/>
					<span class="formlabel petInfoProfile textColor DOB">@Model.DOB</span>
				</div>

				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_Age"]</span>

					@{
						var currentDate = DateOnly.FromDateTime(DateTime.Now);
						var petDOB = Model.DOB;
						var dayDiffer = currentDate.DayNumber - petDOB.DayNumber;
						var yearDiffer = currentDate.Year - petDOB.Year;
						var monthDiffer = currentDate.Month - petDOB.Month + (12 * yearDiffer);
						var ageText = "";
						var yearText = "";

						if (dayDiffer < 30)
						{
							ageText = dayDiffer + " day";
							if (dayDiffer > 1) { ageText += "s"; }
							yearText = "0";
						}
						else if (monthDiffer < 12)
						{
							ageText = monthDiffer + " month";
							if (monthDiffer > 1) { ageText += "s"; }
							yearText = "0";
						}
						else
						{
							ageText = (monthDiffer / 12) + " year";
							if ((monthDiffer / 12) > 1) { ageText += "s"; }
							yearText = (monthDiffer / 12) + "";
						}
					}

					<input type="text" class="form-control form-field inputField petInfoProfile Age hideContainer" value="@yearText" disabled />
					<span class="formlabel petInfoProfile textColor Age"> @ageText </span>
				</div>

				<div class="field-container">
					<span class="formlabel">@LangResources["Patient_Label_Species"]</span>
					<select onchange="changeSpecies(this);" class="form-control form-field inputField petInfoProfile Species hideContainer">
						<option value=""> -- @LangResources["Patient_Selection_SelectSpecies"] --</option>
						@foreach (var species in ViewData["Species"] as List<string>)
						{
							if(species == Model.Species)
							{
								<option value="@species" selected> @species</option>
							}
							else
							{
								<option value="@species"> @species</option>
							}
						}
					</select>
					<span class="formlabel petInfoProfile textColor Species">@Model.Species</span>
				</div>
			</div>

			<div style="display: flex; margin-bottom: 1.5vw;">
				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_Breed"]</span>
					<select class="form-control form-field inputField petInfoProfile Breed hideContainer">
						<option value="" selected> -- @LangResources["Patient_Selection_SelectBreed"] --</option>
					</select>
					<span class="formlabel petInfoProfile textColor Breed">@Model.Breed</span>
				</div>

				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_Allergies"]</span>
					<input type="text" class="form-control form-field inputField petInfoProfile Allergies hideContainer" value="@Model.Allergies" />
					<span class="formlabel petInfoProfile textColor Allergies">@Model.Allergies</span>
				</div>

				<div class="field-container">
					<span class="formlabel">@LangResources["Patient_Label_Color"]</span>
					<select class="form-control form-field inputField petInfoProfile Color hideContainer">
						<option value=""> -- @LangResources["Patient_Selection_SelectColor"] --</option>
						@foreach (var color in ViewData["Color"] as List<string>)
						{
							if (color == Model.Color)
							{
								<option value="@color" selected> @color</option>
							}
							else
							{
								<option value="@color"> @color</option>
							}
						}
					</select>
					<span class="formlabel petInfoProfile textColor Color">@Model.Color</span>
				</div>
			</div>

			<div style="display: flex; margin-bottom: 1.5vw;">
				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_Height"] (cm)</span>
					<input type="text" class="form-control form-field inputField petInfoProfile Height hideContainer" value="@Model.Height" />
					<span class="formlabel petInfoProfile textColor Height">@Model.Height</span>
				</div>

				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_Weight"] (kg)</span>
					<input type="text" class="form-control form-field inputField petInfoProfile Weight hideContainer" value="@Model.Weight" />
					<span class="formlabel petInfoProfile textColor Weight">@Model.Weight</span>
				</div>

				<div class="field-container">
					<span class="formlabel">@LangResources["Patient_Label_Status"]</span>
					<select class="form-control form-field inputField petInfoProfile Status hideContainer">
						<option value=""> -- @LangResources["Patient_Selection_SelectStatus"] --</option>
						@if (Model.Status == 1)
						{
							<option value="1" selected> @LangResources["Patient_Selection_Active"]</option>
							<option value="2"> @LangResources["Patient_Selection_Inactive"]</option>
						}
						else
						{
							<option value="1"> @LangResources["Patient_Selection_Active"]</option>
							<option value="2" selected> @LangResources["Patient_Selection_Inactive"]</option>
						}
					</select>
					@if (Model.Status == 1)
					{
						<span class="formlabel petInfoProfile textColor Status">@LangResources["Patient_Selection_Active"]</span>
					}
					else
					{
						<span class="formlabel petInfoProfile textColor Status">@LangResources["Patient_Selection_Inactive"]</span>
					}
				</div>
			</div>

			<div style="display: flex; margin-bottom: 1.5vw;" class="petInfoProfile">
				<div class="field-container quaterSize">
					<span class="formlabel">@LangResources["Patient_Label_Obese"]</span>
					@{
						var obesity = "";
						var bmi = (Model.Weight / (Model.Height * Model.Height)) * 10000;
					}
					<span class="formlabel Obese" style="color: @(bmi > 30 ? "red" : "green");">@(bmi > 30 ? LangResources["Patient_Selection_Yes"] : @LangResources["Patient_Selection_No"])</span>
				</div>
			</div>


			<div class="hideContainer petInfoProfile" style="text-align: end; margin-right: 1.6vw;">
				<button onclick="editPetInfo(false)" class="btn btn-lg btn-secondary" style="width: 11vw; font-size: 1vw;"> @LangResources["Patient_Button_Cancel"] </button>
				<button onclick="editPetInfo(true);" class="btn btn-lg btn-primary" style="width: 11vw; font-size: 1vw;"> @LangResources["Patient_Button_Save"] </button>
			</div>

		</div>

		<div class="containerBackground2" style="width: 50vw; color: white; padding: 0.7vw; padding-left: 1.5vw; border-top-left-radius: 0.5vw; border-top-right-radius: 0.5vw;  display: flex; justify-content: space-between; align-items: center;">
			<span class="formlabel" style="margin-bottom: 0 !important;">@LangResources["Patient_Title_MedicalRecord"]</span>
			<button onclick="editMedicalRecord();" class="btn btn-lg btn-primary medicalRecord" style="height: 2vw; width: 3vw; padding: 0; display: flex; justify-content: center; align-items: center;">
				<i class="fa-regular fa-pen-to-square"></i>
			</button>
			<button onclick="editMedicalRecord();" class="btn btn-lg btn-primary medicalRecord hideContainer" style="height: 2vw; width: 3vw; padding: 0; display: flex; justify-content: center; align-items: center;">
				<i class="fa-regular fa-floppy-disk"></i>
			</button>
		</div>
		<div class="containerBorder textColor" style="width: 50vw; border-style: solid; border-bottom-left-radius: 0.5vw; border-bottom-right-radius: 0.5vw; padding: 1.5vw; padding-left: 0.5vw; padding-right: 0.5vw; padding-bottom: 0.5vw; margin-bottom: 2vw; display: flex">

			<div class="medicalRecordPartition">

				<div class="medicalRecordPartitionTitle">
					<span class="formlabel" style="color: blue;">@LangResources["Patient_Label_Vaccination"]</span>
				</div>

				<div id="VaccinationContent" style="font-size: 1vw; padding-left: 1.5vw; padding-right: 1.5vw; padding-bottom: 1.5vw;">
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Vaccination</span> </br>
							<span style="font-weight:bold;">Vanguard DHLPP</span> </br>
							<span style="color: darkgray;">02/04/2023</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div class="tooltip">
									<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
								</div>
								<div class="tooltip">
									<i class="fa fa-exclamation-circle textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Need to monitor further.</span>
								</div>								
							</div>
						</div>
						<div class="medicalRecord hideContainer">
							<div>
								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
									<input type="text" class="form-control form-field inputField TypeVaccination" value="Vaccination"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
									<input id="NameVaccination" type="text" class="form-control form-field inputField NameVaccination" value="Vanguard DHLPP"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_DueDate"]</span>
									<input type="date" class="form-control form-field inputField DueDateVaccination" value="2023-06-02"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">Remarks</span>
									<input type="text" class="form-control form-field inputField RemarksVaccination" value="Need to monitor further."/>
								</div>

								<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
									<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
								</div>
							</div>
						</div>
					</div>
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Vaccination</span> </br>
							<span style="font-weight:bold;">Vanguard DHLPP</span> </br>
							<span style="color: darkgray;">02/04/2023</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div class="tooltip">
									<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
								</div>
								<div class="tooltip">
									<i class="fa fa-exclamation-circle textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Need to monitor further.</span>
								</div>								
							</div>
						</div>
						<div class="medicalRecord hideContainer">
							<div>
								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
									<input type="text" class="form-control form-field inputField TypeVaccination" value="Vaccination"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
									<input id="NameVaccination" type="text" class="form-control form-field inputField NameVaccination" value="Vanguard DHLPP"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_DueDate"]</span>
									<input type="date" class="form-control form-field inputField DueDateVaccination" value="2023-06-02"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">Remarks</span>
									<input type="text" class="form-control form-field inputField RemarksVaccination" value="Need to monitor further."/>
								</div>

								<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
									<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
								</div>
							</div>
						</div>
					</div>
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Vaccination</span> </br>
							<span style="font-weight:bold;">Vanguard DHLPP</span> </br>
							<span style="color: darkgray;">02/04/2023</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div class="tooltip">
									<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
								</div>
								<div class="tooltip">
									<i class="fa fa-exclamation-circle textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Need to monitor further.</span>
								</div>								
							</div>
						</div>
						<div class="medicalRecord hideContainer">
							<div>
								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
									<input type="text" class="form-control form-field inputField TypeVaccination" value="Vaccination"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
									<input id="NameVaccination" type="text" class="form-control form-field inputField NameVaccination" value="Vanguard DHLPP"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_DueDate"]</span>
									<input type="date" class="form-control form-field inputField DueDateVaccination" value="2023-06-02"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">Remarks</span>
									<input type="text" class="form-control form-field inputField RemarksVaccination" value="Need to monitor further."/>
								</div>

								<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
									<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>

			<div class="medicalRecordPartition">
				<div class="medicalRecordPartitionTitle">
					<span class="formlabel" style="color: blue;">@LangResources["Patient_Label_Medication"]</span>
				</div>

				<div id="MedicationContent" style="font-size: 1vw; padding-left: 1.5vw; padding-right: 1.5vw; padding-bottom: 1.5vw;">
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Antifungals</span> </br>
							<span style="font-weight:bold;">Fluconazole 5mg|10ml</span> </br>
							<span style="color: #5e8cd1">Active</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div>
									<div class="tooltip">
										<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
										<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
									</div>
									<i class="fa-regular fa-trash-can textcolor"></i>
								</div>
							</div>
						</div>
						<div class="medicalRecord hideContainer">
							<div>
								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
									<input type="text" class="form-control form-field inputField TypeMedication" value="Antifungals"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
									<input id="NameMedication" type="text" class="form-control form-field inputField NameMedication" value="Fluconazole 5mg|10ml"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_ExpiryDate"]</span>
									<input type="date" class="form-control form-field inputField DueDateMedication" value="2023-06-02"/>
								</div>

								<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
									<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
								</div>
							</div>
						</div>						
					</div>
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Antifungals</span> </br>
							<span style="font-weight:bold;">Fluconazole 5mg|10ml</span> </br>
							<span style="color: #5e8cd1">Active</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div>
									<div class="tooltip">
										<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
										<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
									</div>
									<i class="fa-regular fa-trash-can textcolor"></i>
								</div>
							</div>
						</div>
						<div class="medicalRecord hideContainer">
							<div>
								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
									<input type="text" class="form-control form-field inputField TypeMedication" value="Antifungals"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
									<input id="NameMedication" type="text" class="form-control form-field inputField NameMedication" value="Fluconazole 5mg|10ml"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_ExpiryDate"]</span>
									<input type="date" class="form-control form-field inputField DueDateMedication" value="2023-06-02"/>
								</div>

								<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
									<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
								</div>
							</div>
						</div>						
					</div>
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Antifungals</span> </br>
							<span style="font-weight:bold;">Fluconazole 5mg|10ml</span> </br>
							<span style="color: #5e8cd1">Active</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div>
									<div class="tooltip">
										<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
										<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
									</div>
									<i class="fa-regular fa-trash-can textcolor"></i>
								</div>
							</div>
						</div>
						<div class="medicalRecord hideContainer">
							<div>
								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
									<input type="text" class="form-control form-field inputField TypeMedication" value="Antifungals"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
									<input id="NameMedication" type="text" class="form-control form-field inputField NameMedication" value="Fluconazole 5mg|10ml"/>
								</div>

								<div class="field-container" style="margin: 0;">
									<span class="formlabel">@LangResources["Patient_Label_ExpiryDate"]</span>
									<input type="date" class="form-control form-field inputField DueDateMedication" value="2023-06-02"/>
								</div>

								<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
									<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
								</div>
							</div>
						</div>						
					</div>
				</div>

			</div>

			<div class="medicalRecordPartition">
				<div class="medicalRecordPartitionTitle">
					<span class="formlabel" style="color: blue;">@LangResources["Patient_Label_Surgeries"]</span>
				</div>

				<div id="SurgeriesContent" style="font-size: 1vw; padding-left: 1.5vw; padding-right: 1.5vw; padding-bottom: 1.5vw;">
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Spaying</span> </br>
							<span style="font-weight:bold;">Ovariohysterectomy</span> </br>
							<span style="color: darkgray;">02/04/2023</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div class="tooltip">
									<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
								</div>
								<div class="tooltip">
									<i class="fa fa-exclamation-circle textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Need to monitor further.</span>
								</div>	
							</div>
						</div>
						<div class="medicalRecord hideContainer">
								<div>
									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
										<input type="text" class="form-control form-field inputField TypeSurgeries" value="Spaying"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
										<input id="NameSurgeries" type="text" class="form-control form-field inputField NameSurgeries" value="Ovariohysterectomy"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_DueDate"]</span>
										<input type="date" class="form-control form-field inputField DueDateSurgeries" value="2023-06-02"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">Remarks</span>
										<input type="text" class="form-control form-field inputField RemarksSurgeries" value="Need to monitor further."/>
									</div>

									<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
										<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
									</div>
								</div>
							</div>
					</div>
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Spaying</span> </br>
							<span style="font-weight:bold;">Ovariohysterectomy</span> </br>
							<span style="color: darkgray;">02/04/2023</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div class="tooltip">
									<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
								</div>
								<div class="tooltip">
									<i class="fa fa-exclamation-circle textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Need to monitor further.</span>
								</div>	
							</div>
						</div>
						<div class="medicalRecord hideContainer">
								<div>
									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
										<input type="text" class="form-control form-field inputField TypeSurgeries" value="Spaying"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
										<input id="NameSurgeries" type="text" class="form-control form-field inputField NameSurgeries" value="Ovariohysterectomy"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_DueDate"]</span>
										<input type="date" class="form-control form-field inputField DueDateSurgeries" value="2023-06-02"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">Remarks</span>
										<input type="text" class="form-control form-field inputField RemarksSurgeries" value="Need to monitor further."/>
									</div>

									<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
										<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
									</div>
								</div>
							</div>
					</div>
					<div style="margin-bottom: 1vw;">
						<div class="medicalRecord">
							<span>Spaying</span> </br>
							<span style="font-weight:bold;">Ovariohysterectomy</span> </br>
							<span style="color: darkgray;">02/04/2023</span> </br>
							<span style="color: red;">Due: 02/06/2023</span> </br>
							<div>
								<div class="tooltip">
									<i class="fa fa-commenting-o textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Give 0.5ml by mouth every 12 hours until finish. </br> 01/06/2024 - 14/06/2024</span>
								</div>
								<div class="tooltip">
									<i class="fa fa-exclamation-circle textcolor" aria-hidden="true"></i>
									<span class="tooltiptext">Need to monitor further.</span>
								</div>	
							</div>
						</div>
						<div class="medicalRecord hideContainer">
								<div>
									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_Type"]</span>
										<input type="text" class="form-control form-field inputField TypeSurgeries" value="Spaying"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_Name"]</span>
										<input id="NameSurgeries" type="text" class="form-control form-field inputField NameSurgeries" value="Ovariohysterectomy"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">@LangResources["Patient_Label_DueDate"]</span>
										<input type="date" class="form-control form-field inputField DueDateSurgeries" value="2023-06-02"/>
									</div>

									<div class="field-container" style="margin: 0;">
										<span class="formlabel">Remarks</span>
										<input type="text" class="form-control form-field inputField RemarksSurgeries" value="Need to monitor further."/>
									</div>

									<div style="display:flex;align-items: center; justify-content: flex-end; margin-top: 1.5vw;">
										<a onclick="removeClone(this.parentElement.parentElement.parentElement.parentElement);"><i class="fa fa-trash-o" style="font-size:2vw;color:red"></i></a>
									</div>
								</div>
							</div>
					</div>
				</div>

			</div>

		</div>

		<div class="containerBorder textColor" style="width: 50vw; padding: 0.7vw; padding-left: 1.5vw; border-radius: 0.5vw; border-style: solid; margin-bottom: 2vw;">

			<div style="margin-bottom: 2vw;">
				<span style="font-weight: bold;">@LangResources["Patient_Title_PetGrowthHistory"]</span>
			</div>

			<div style="height: 24vw; overflow: auto;">
				<table id="petGrowthTable" class="textColor" style="width: 46vw; margin-bottom: 2vw; font-size: 1vw;">
					<tr class="containerBackground">
						<th class="table-content"> @LangResources["Patient_Label_Date"] </th>
						<th class="table-content"> @LangResources["Patient_Label_AgeYear"] </th>
						<th class="table-content"> @LangResources["Patient_Label_Height"] </th>
						<th class="table-content"> @LangResources["Patient_Label_Weight"] </th>
						<th class="table-content"> @LangResources["Patient_Label_Allergies"] </th>
						<th class="table-content"> @LangResources["Patient_Label_Obesity"] </th>
					</tr>
					@* <tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr>
					<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">
						<td class="table-content"> 5/8/2024 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> 50 </td>
						<td class="table-content"> 5 </td>
						<td class="table-content"> N/A </td>
						<td class="table-content"> No </td>
					</tr> *@
				</table>
			</div>

		</div>

		<div class="containerBorder textColor" style="width: 50vw; padding: 0.7vw; padding-left: 1.5vw; border-radius: 0.5vw; border-style: solid;">

			<div style="display: flex; justify-content: space-between; margin-bottom: 2vw;">
				<span style="font-weight: bold;"> @LangResources["Patient_Title_PetGrowthTrend"]</span>
				<div class="dropdown">
					<button class="dropbtn textColor"> <span id="chartSelection"></span> <i class="fa-solid fa-chevron-down dropdown-arrow"></i></button>
					<div class="dropdown-content containerBackground4" style="border: 0.1vw solid; border-radius: 1vw;">
						<a href="#" class="textColor" style="border-top-left-radius: 1vw; border-top-right-radius: 1vw;" onclick="changeChart('BMI', this.innerHTML)">@LangResources["Patient_Label_BMI"]</a>
						<a href="#" class="textColor" onclick="changeChart('Weight', this.innerHTML);">@LangResources["Patient_Label_Weight"]</a>
						<a href="#" class="textColor" style="border-bottom-left-radius: 1vw; border-bottom-right-radius: 1vw;" onclick="changeChart('Height', this.innerHTML);">@LangResources["Patient_Label_Height"]</a>
					</div>
				</div>
			</div>

			<canvas id="myChart"></canvas>

		</div>


	</div>

	<div id="RightInfoContainer" style="margin-left: 1.5vw; overflow: auto; height: 74vh; width: 24vw;">
		<div>

			<div class="containerBackground2" style="width: 23vw; padding: 0.7vw; padding-left: 1.5vw; border-top-left-radius: 0.5vw; border-top-right-radius: 0.5vw;">
				<span class="formlabel" style="margin-bottom: 0 !important;">@LangResources["Patient_Title_AllPets"]</span>
			</div>
			<div class="containerBorder textColor" style="color: darkgray; width: 23vw; border-style: solid; border-bottom-left-radius: 0.5vw; border-bottom-right-radius: 0.5vw; padding: 2vw; padding-left: 0.5vw; padding-right: 0.5vw; padding-bottom: 0.5vw; margin-bottom: 2vw;">

				<div id="allPets" style="display: flex; margin-bottom: 1.5vw;">
					@foreach(string otherPet in otherPets)
					{
						<div class="field-container" style="text-align: center;">
							<img onclick="location.href = '/Patients/PetProfile/View/@ViewBag.PatientID/@otherPet'" src="~/images/Cat profile image.png" style="width: 4vw;" />
							<a href="/Patients/PetProfile/View/@ViewBag.PatientID/@otherPet" style="font-size: 1vw;"> @otherPet </a>
						</div>
					}
				</div>

			</div>

			<div class="containerBackground2" style="width: 23vw; padding: 0.7vw; padding-left: 1.5vw; border-top-left-radius: 0.5vw; border-top-right-radius: 0.5vw;">
				<span class="formlabel" style="margin-bottom: 0 !important;">@LangResources["Patient_Title_AdditionalInformation"]</span>
			</div>
			<div class="containerBorder textColor" style="color: darkgray; width: 23vw; border-style: solid; border-bottom-left-radius: 0.5vw; border-bottom-right-radius: 0.5vw; padding: 2vw; padding-left: 0.5vw; padding-right: 0.5vw; padding-bottom: 0.5vw; margin-bottom: 2vw;">

				<div style="display: flex; margin-bottom: 1.5vw;">
					<div class="field-container quaterSize" style="display: flex; align-items: center;">
						<button class="btn btn-lg btn-primary" data-bs-toggle="modal" data-bs-target="#healthCardModal" style="width: 5vw; height: 4vw; font-size: 2vw; display: flex; justify-content: center;  align-items: center;">
							<i class="fa-solid fa-notes-medical"></i>
						</button>
						<span class="formlabel textColor" style="text-wrap: nowrap;">@LangResources["Patient_Label_HealthCard"]</span>
					</div>
					<div class="field-container quaterSize" style="display: flex; align-items: center;">
						<button class="btn btn-lg btn-primary" onclick="window.location = '/Patients/TreatmentPlan/@ViewBag.PatientID/@ViewData["PetName"]';" style="width: 5vw; height: 4vw; font-size: 2vw; display: flex; justify-content: center;  align-items: center;">
							<i class="fa-regular fa-hospital"></i>
						</button>
						<span class="formlabel textColor" style="text-wrap: nowrap;">@LangResources["Patient_Label_TreatmentPlan"]</span>
					</div>
				</div>

				<div style="display: flex; margin-bottom: 1.5vw;">
					<div class="field-container quaterSize" style="display: flex; align-items: center;">
						<button class="btn btn-lg btn-primary" onclick="window.location = '/Patients/InvoiceBilling/@ViewBag.PatientID/@ViewData["PetName"]';" style="width: 5vw; height: 4vw; font-size: 2vw; display: flex; justify-content: center;  align-items: center;">
							<i class="fa-solid fa-receipt"></i>
						</button>
						<span class="formlabel textColor" style="text-wrap: nowrap;">@LangResources["Patient_Label_InvoiceBilling"]</span>
					</div>
					<div class="field-container quaterSize" style="display: flex; align-items: center;">
						<button class="btn btn-lg btn-primary" style="width: 5vw; height: 4vw; font-size: 2vw; display: flex; justify-content: center;  align-items: center;">
							<i class="fa-solid fa-flask-vial"></i>
						</button>
						<span class="formlabel textColor" style="text-wrap: nowrap;">@LangResources["Patient_Label_TestManagement"]</span>
					</div>
				</div>


				

			</div>

			<div class="containerBackground2" style="width: 23vw; padding: 0.7vw; padding-left: 1.5vw; border-top-left-radius: 0.5vw; border-top-right-radius: 0.5vw;">
				<span class="formlabel" style="margin-bottom: 0 !important;">@LangResources["Patient_Title_UpcomingAppointment"]</span>
			</div>
			<div class="containerBorder" style="background-color: #c8dcfc; color: darkgray; width: 23vw; border-style: none; border-bottom-left-radius: 0.5vw; border-bottom-right-radius: 0.5vw; padding: 2vw; padding-left: 0.5vw; padding-right: 0.5vw; padding-bottom: 0.4vw;">

				<div style="display: flex; margin-bottom: 1.5vw;">
					<div class="field-container quaterSize">
						<span class="formlabel">@LangResources["Patient_Label_Date"]</span>
						<span class="formlabel" style="color: black;">10/4/2024</span>
					</div>

					<div class="field-container quaterSize">
						<span class="formlabel">@LangResources["Patient_Label_Time"]</span>
						<span class="formlabel" style="color: black;">13:00</span>
					</div>
				</div>


				<div style="display: flex; margin-bottom: 1.5vw;">
					<div class="field-container quaterSize">
						<span class="formlabel">@LangResources["Patient_Label_Pet"]</span>
						<span class="formlabel" style="color: black;">Simba</span>
					</div>

					<div class="field-container quaterSize">
						<span class="formlabel">@LangResources["Patient_Label_Service"]</span>
						<span class="formlabel" style="color: black;">General Check Up</span>
					</div>
				</div>


				<div style="display: flex; margin-bottom: 1.5vw;">
					<div class="field-container quaterSize">
						<span class="formlabel">@LangResources["Patient_Label_Doctor"]</span>
						<span class="formlabel" style="color: black;">Dr. Kim Soo Jun</span>
					</div>
				</div>

			</div>
		</div>

	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="healthCardModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="--bs-modal-width: unset; margin: 2vw auto;">

	<style>
		.hideContainer {
			display: none !important;
		}

		@@media print {
			/* All your print styles go here */
			.printFont {
				font-size: 2vw !important;
			}

			.printImg {
				width: 10vw !important;
			}
		}

		.modal-content-custom {
			border: 0.1vw solid !important;
			padding: 1vw;
		}
	</style>

	<div class="modal-dialog" style="margin: 0 auto; width: fit-content;">
		<div class="modal-content">
			<div class="modal-header" style="display: flex; justify-content: flex-end; --bs-modal-header-border-color: none; padding-bottom: 0;">
				<button type="button" onclick="downloadHealthCard();" style="margin-right: 1vw; display: flex; justify-content: center;  align-items: center; font-size: 1vw; width: 1vw;" class="btn btn-lg btn-primary" data-bs-dismiss="modal">
					<i class="fa-solid fa-download"></i>
				</button>
				<button type="button" onclick="printHealthCard();" style="display: flex; justify-content: center;  align-items: center; font-size: 1vw; width: 1vw;" class="btn btn-lg btn-primary" data-bs-dismiss="modal"><i class="fa-solid fa-print"></i></button>
			</div>
			<div class="modal-body" style="display: flex;">
				<div style="margin: 0 1vw;">
					<img class="printImg" src="~/images/Cat profile image.png" style="width: 6vw; margin-bottom: 2vw;" />

					<div style="display: flex; flex-direction: column; margin: 1vw 0;">
						<span class="printFont" style="color: darkgray; font-size: 1vw;">@LangResources["Patient_Label_PetName"]</span>
						<span class="printFont" style="color: black; font-size: 1vw;">@ViewData["PetName"]</span>
					</div>

					<div style="display: flex; flex-direction: column; margin: 1vw 0;">
						<span class="printFont" style="color: darkgray; font-size: 1vw;">@LangResources["Patient_Label_RegistrationNo"]:</span>
						<span class="printFont" style="color: black; font-size: 1vw;">@Model.RegistrationNo</span>
					</div>
				</div>

				<hr style="border: 0.1vw solid black; margin: 0 1vw;">

				<div>
					<div style="margin-bottom: 2vw; padding: 1vw;">
						<span class="printFont" style="font-weight: bold; font-size: 1vw; padding: 0 2vw;">@LangResources["Patient_Title_VaccinationTreatmentHistory"]</span>

						<table class="printFont" style="font-size: 1vw; margin-top: 1vw;">
							<tr>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_Date"]</th>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_VaccinationTreatment"]</th>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_Name"]</th>
							</tr>
							<tr>
								<td style="padding: 0 2vw;">01/09/2023</td>
								<td style="padding: 0 2vw;">Rabbies Vaccinations</td>
								<td style="padding: 0 2vw;">Defensor 1 - Rabies</td>
							</tr>
							<tr>
								<td style="padding: 0 2vw;">01/09/2023</td>
								<td style="padding: 0 2vw;">Rabbies Vaccinations</td>
								<td style="padding: 0 2vw;">Defensor 1 - Rabies</td>
							</tr>
							<tr>
								<td style="padding: 0 2vw;">01/09/2023</td>
								<td style="padding: 0 2vw;">Rabbies Vaccinations</td>
								<td style="padding: 0 2vw;">Defensor 1 - Rabies</td>
							</tr>
							<tr>
								<td style="padding: 0 2vw;">01/09/2023</td>
								<td style="padding: 0 2vw;">Rabbies Vaccinations</td>
								<td style="padding: 0 2vw;">Defensor 1 - Rabies</td>
							</tr>
						</table>
					</div>

					<div style="margin: 2vw 0; padding: 1vw;">
						<span class="printFont" style="font-weight: bold; font-size: 1vw; padding: 0 2vw;">@LangResources["Patient_Title_MedicationHistory"]</span>

						<table class="printFont" style="font-size: 1vw; margin-top: 1vw;">
							<tr>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_Date"]</th>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_MedicationName"]</th>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_Status"]</th>
							</tr>
							<tr>
								<td style="padding: 0 2vw;">01/09/2023</td>
								<td style="padding: 0 2vw;">Prednisalone Suspension 5mg|10ml</td>
								<td style="padding: 0 2vw;">Active</td>
							</tr>
						</table>
					</div>

					<div style="margin: 2vw 0; background-color: whitesmoke; padding: 1vw; border-radius: 0.5vw;">
						<span class="printFont" style="font-weight: bold; font-size: 1vw; padding: 0 2vw;">@LangResources["Patient_Title_UpcomingVaccinationTreatment"]</span>

						<table class="printFont" style="font-size: 1vw; margin-top: 1vw;">
							<tr>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_Date"]</th>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_VaccinationTreatment"]</th>
								<th style="color: darkgray; padding: 0 2vw;">@LangResources["Patient_Label_Name"]</th>
							</tr>
							<tr>
								<td style="padding: 0 2vw;">01/09/2023</td>
								<td style="padding: 0 2vw;">Rabbies Vaccinations</td>
								<td style="padding: 0 2vw;">Defensor 1 - Rabies</td>
							</tr>
						</table>
					</div>

				</div>
			</div>
		</div>
	</div>

</div>

<span id="age" hidden>@LangResources["Patient_Label_Age"]</span>
<span id="bmi" hidden>@LangResources["Patient_Label_BMI"]</span>
<span id="weight" hidden>@LangResources["Patient_Label_Weight"]</span>
<span id="height" hidden>@LangResources["Patient_Label_Height"]</span>
<span id="year" hidden>@LangResources["Patient_Label_Year"]</span>

<script>
	// const age = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
	// const weight = [7, 8, 8, 9, 9, 9, 10, 11, 14, 14, 15];
	// const height = [17, 18, 18, 19, 19, 19, 10, 11, 14, 14, 15];
	// const bmi = [16.5, 27.4, 16.5, 27.4, 16.5, 27.4, 16.5, 27.4, 16.5, 27.4, 16.5];
	var age = [];
	var weight = [];
	var height = [];
	var bmi = [];
	var chartElement;
	var xData, yData, xLable, yLabel;
	var borderOpacity = "0.1";
	var axisColor = "black";
	var currentGraph = "";

	getPetGrowth();

	function getPetGrowth() {
		fetch('/Patients/GetPetGrowth?petID=' + document.querySelector("#PetID").value)
			.then(response => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}
				return response.json();
			})
			.then(data => {
				
				var tableElement = document.getElementById("petGrowthTable");

				for (let i = 0; i < data.length; i++) {
					var obesity = "No";
					var color = "green";

					if (data[i].BMI > 30) {
						obesity = "Yes";
						color = "red";
					}

					var date = new Date(data[i].CreatedDate);
					var dateText = date.getDate() + "/" + date.getMonth() + "/" + date.getFullYear();

					age.push(data[i].Age);
					weight.push(data[i].Weight);
					height.push(data[i].Height);
					bmi.push(data[i].BMI);

					var rowContent =
						'<tr style="border-bottom-width: 0.1vw; height: 3.3vw;">' +
						'<td class="table-content" > ' + dateText + ' </td >' +
						'<td class="table-content"> ' + data[i].Age + ' </td>' +
						'<td class="table-content"> ' + data[i].Height + ' </td>' +
						'<td class="table-content"> ' + data[i].Weight + ' </td>' +
						'<td class="table-content"> ' + data[i].Allergies + ' </td>' +
						'<td class="table-content" style="color: ' + color + ';"> ' + obesity + ' </td>' +
						'</tr> ';

					tableElement.innerHTML = tableElement.innerHTML + rowContent;
				}

				changeChart("BMI", document.getElementById("bmi").innerHTML);

			})
			.catch(error => {
				console.error('There was a problem with the fetch operation:', error);
			});
	}
	

	function changeChart(name, element) {
		if (name != "current") {
			document.getElementById("chartSelection").innerHTML = element;
		}

		if(name != currentGraph){
			currentGraph = name;

			if (chartElement) {
				chartElement.chart.destroy();
			}

			xData = age;
			xLable = document.getElementById("age").innerHTML;

			if (name == 'Weight') {
				yData = weight;
				yLabel = document.getElementById("weight").innerHTML + " (kg)";
			}
			else if (name == 'Height') {
				yData = height;
				yLabel = document.getElementById("height").innerHTML + " (cm)";
			}
			else if (name == 'BMI') {
				yData = bmi;
				yLabel = document.getElementById("bmi").innerHTML;
			}

			chartElement = new Chart("myChart", {
				type: "line",
				data: {
					labels: xData,
					datasets: [{
						label: yLabel,
						fill: false,
						backgroundColor: "rgba(0,0,255,1.0)",
						borderColor: "rgba(0,0,255," + borderOpacity + ")",
						data: yData
					}]
				},
				options: {
					locale: '@LangResources["Locale"]',
					legend: { display: false },
					scales: {
						yAxes: [{
							scaleLabel: {
								display: true,
								labelString: yLabel
							},
							gridLines: {
								drawOnChartArea: false
							},
							ticks: { beginAtZero: true, fontColor: axisColor }
						}],
						xAxes: [{
							scaleLabel: {
								display: true,
								labelString: xLable
							},
							gridLines: {
								drawOnChartArea: false
							},
							ticks: { fontColor: axisColor }
						}]
					},
					tooltips: {
						enabled: true,
						callbacks: {
							title: function (tooltipItem, data) {
								var title = document.getElementById("year").innerHTML + ' ' + tooltipItem[0].xLabel;
								return title;
							}
						}
					}
				}
			});
		}
		
		
	}
</script>

<script>
	var species = document.querySelector(".Species").value;
	var breedElement = document.querySelector(".Breed");
	breedList(species, breedElement, '@ViewBag.Breed');

	if ('@ViewBag.type' == 'edit') {
		editPetInfo();
	}

	function updateAge(e){
		var currentDate = new Date();
		var petDOB = new Date(e.value);
		var yearDiffer = currentDate.getFullYear() - petDOB.getFullYear();
		var monthDiffer = currentDate.getMonth() - petDOB.getMonth() + (12 * yearDiffer);
		var yearText = "";

		yearText = (monthDiffer / 12) + "";

		var AgeElement = document.querySelectorAll(".Age")
		AgeElement[0].value = parseInt(yearText);
	}

	function editPetInfo(submit) {
		var element = document.querySelectorAll('.petInfoProfile');

		for (let i = 0; i < element.length; i++) {
			element[i].classList.toggle("hideContainer");
		}

		if (submit) {
			submitPetInfoUpdate();
		}
	}

	function editMedicalRecord(){
		var element = document.querySelectorAll('.medicalRecord');

		for (let i = 0; i < element.length; i++) {
			element[i].classList.toggle("hideContainer");
		}
	}

	function removeClone(e) {
		var parent = e.remove();
	}

	function changeSpecies(e) {
		var breedElement = document.querySelector(".Breed");
		breedList(e.value, breedElement, "");
	}

	function breedList(species, breedElement, breedValue) {
		fetch('/Patients/BreedList?species=' + species)
			.then(response => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}
				return response.json();
			})
			.then(data => {

				if (breedValue != "") {
					breedElement.innerHTML = '<option value=""> -- Select Breed -- </option>';
				}
				else {
					breedElement.innerHTML = '<option value="" selected> -- Select Breed -- </option>';
				}

				for (let i = 0; i < data.length; i++) {
					if (breedValue == data[i].Breed) {
						breedElement.innerHTML = breedElement.innerHTML + '<option value="' + data[i].Breed + '" selected>' + data[i].Breed + '</option>';
					}
					else {
						breedElement.innerHTML = breedElement.innerHTML + '<option value="' + data[i].Breed + '">' + data[i].Breed + '</option>';
					}
				}
			})
			.catch(error => {
				console.error('There was a problem with the fetch operation:', error);
			});
	}

	function submitPetInfoUpdate() {
		var PetNameElement = document.querySelectorAll(".PetName")
		var RegistrationNoElement = document.querySelectorAll(".RegistrationNo")
		var GenderElement = document.querySelectorAll(".Sex")
		var DOBElement = document.querySelectorAll(".DOB")
		var AgeElement = document.querySelectorAll(".Age")
		var SpeciesElement = document.querySelectorAll(".Species")
		var BreedElement = document.querySelectorAll(".Breed")
		var ColorElement = document.querySelectorAll(".Color")
		var AllergiesElement = document.querySelectorAll(".Allergies")
		var WeightElement = document.querySelectorAll(".Weight")
		var HeightElement = document.querySelectorAll(".Height")
		var StatusElement = document.querySelectorAll(".Status")


		var obj = {
			ID: document.querySelector("#PetID").value,
			PatientID: @ViewBag.PatientID,
			Name: PetNameElement[0].value,
			RegistrationNo: RegistrationNoElement[0].value,
			Gender: GenderElement[0].value,
			DOB: DOBElement[0].value,
			Age: AgeElement[0].value,
			Species: SpeciesElement[0].value,
			Breed: BreedElement[0].value,
			Color: ColorElement[0].value,
			Allergies: AllergiesElement[0].value,
			Weight: WeightElement[0].value,
			WeightUnit: "kg",
			Height: HeightElement[0].value,
			HeightUnit: "cm",
			Status: StatusElement[0].value,
			CreatedDate: document.querySelector("#PetCreatedDate").value,
			CreatedBy: document.querySelector("#PetCreatedBy").value,
			UpdatedDate: new Date(),
			UpdatedBy: "Admin"
		}

		fetch('/Patients/UpdatePetInfo', {
			method: 'post',
			headers: { 'Content-Type': 'application/json' },
			body: JSON.stringify(obj)
		})
			.then(response => {
				if (!response.ok) {
					throw new Error('Network response was not ok');
				}

				location.reload();

				// // PetNameElement[1].innerHTML = PetNameElement[0].value;
				// RegistrationNoElement[1].innerHTML = RegistrationNoElement[0].value;

				// if (GenderElement[0].value == "M") { GenderElement[1].innerHTML = "Male"; }
				// else { GenderElement[1].innerHTML = "Female"; }
				
				// // var date = new Date(DOBElement[0].value);
				// // DOBElement[1].innerHTML = date.getDate() + "/" + (date.getMonth() + 1) + "/" + date.getFullYear();

				// // AgeElement[1].innerHTML = AgeElement[0].value;
				// // SpeciesElement[1].innerHTML = SpeciesElement[0].value;
				// BreedElement[1].innerHTML = BreedElement[0].value;
				// ColorElement[1].innerHTML = ColorElement[0].value;
				// AllergiesElement[1].innerHTML = AllergiesElement[0].value;
				// WeightElement[1].innerHTML = WeightElement[0].value;
				// HeightElement[1].innerHTML = HeightElement[0].value;

				// if (StatusElement[0].value == 1) { StatusElement[1].innerHTML = "Active"; }
				// else { StatusElement[1].innerHTML = "Inactive"; }

			})
			.catch(error => {
				console.error('There was a problem with the fetch operation:', error);
			});
	}	

	function downloadHealthCard() {
		var clone = document.getElementById("healthCardModal").cloneNode(true);
		clone.querySelector(".modal-header").classList.toggle("hideContainer");
		clone.querySelector(".modal-content").classList.toggle("modal-content-custom");
		var element = clone.querySelector(".modal-dialog");

		var opt = {
			margin: 1,
			filename: '@ViewData["PetName"] - Health Card.pdf',
			image: { type: 'jpeg', quality: 0.98 },
			html2canvas: { scale: 2 },
			jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
		};

		html2pdf().set(opt).from(element).save();
	}

	function printHealthCard() {
		var iframe = document.createElement("iframe"); // create the element
		document.body.appendChild(iframe);  // insert the element to the DOM

		var clone = document.getElementById("healthCardModal").cloneNode(true);
		clone.querySelector(".modal-header").classList.toggle("hideContainer");
		clone.querySelector(".modal-content").classList.toggle("modal-content-custom");

		var input = clone.innerHTML;

		iframe.contentWindow.document.write(input); // write the HTML to be printed
		iframe.contentWindow.print();  // print it
		document.body.removeChild(iframe); // remove the iframe from the DOM
	}
</script>